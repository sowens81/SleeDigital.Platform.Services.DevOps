parameters:
    - name: solutionDirectory
      type: string
    - name: buildConfiguration
      type: string
    - name: orginisation
      type: string
    - name: project
      type: string
    - name: host
      type: string

steps:

- task: CmdLine@2
  inputs:
    script: |
        dotnet tool install --global dotnet-sonarscanner
    displayname: Install SonarCloud Agent
    env:

- task: CmdLine@2
  inputs:
    script: |
        dotnet sonarscanner begin \
            /o:%SONARORG% \
            /k:%SONARPROJECT% \
            /d:sonar.host.url=%SONARHOST%
        dotnet build %SOLUTIONDIRECTORY% --configuration %BUILDCONFIGURATION%
        dotnet sonarscanner end
    displayname: Run SonarCloud Scan
    env:
      buildConfiguration: ${{ parameters.buildConfiguration }}
      sonarOrg: ${{ parameters.orginisation }}
      sonarProject: ${{ parameters.project }}
      sonarHost: ${{ parameters.host }}
      solutionDirectory:  ${{ parameters.solutionDirectory }}
      SONAR_TOKEN: ${SONAR_TOKEN}








